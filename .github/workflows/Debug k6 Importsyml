name: Debug k6 Imports

on: [workflow_dispatch]

jobs:
  debug-imports:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup k6
      uses: grafana/setup-k6-action@v1
    
    - name: Show directory structure
      run: |
        echo "=== Directory Structure ==="
        echo "Current dir: $(pwd)"
        echo ""
        echo "Looking for endpoints.js:"
        find . -name "endpoints.js" -type f
        echo ""
        echo "Looking for env.js:"
        find . -name "env.js" -type f
        echo ""
        echo "From tests/experimental/ directory:"
        cd tests/experimental/
        echo "Looking up: ../../../utils/config/"
        ls -la ../../../utils/config/ 2>/dev/null || echo "NOT FOUND"
    
    - name: Run debug test
      run: |
        echo "=== Running k6 debug test ==="
        k6 run tests/experimental/debug-imports.js --verbose
